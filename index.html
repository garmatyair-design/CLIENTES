<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>CRM Proyectos</title>
  <link rel="stylesheet" href="style.css"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<header class="topbar">
  <div class="brand">
    <h1>CRM Proyectos</h1>
    <div class="subtitle">Clientes · Proyectos · KPIs</div>
  </div>

  <div class="top-controls">
    <input id="globalSearch" class="input-search" placeholder="Buscar cliente o proyecto"/>
    <button id="openAddClient" class="btn btn-yellow">+ Cliente</button>
    <button id="openAddProject" class="btn btn-blue">+ Proyecto</button>
    <a href="jdashboard.html" class="btn btn-outline">Ver Dashboard</a>
  </div>
</header>

<main class="layout">

  <!-- CLIENTES -->
  <section class="panel left-panel">
    <div class="panel-head">
      <strong>Clientes</strong>
    </div>

    <div class="panel-controls">
      <input id="clientSearch" class="input-sm" placeholder="Buscar cliente"/>
      <select id="clientTypeFilter" class="input-sm">
        <option value="">Todos</option>
        <option value="1">Tipo 1</option>
        <option value="2">Tipo 2</option>
      </select>
    </div>

    <div id="clientList" class="list"></div>
  </section>

  <!-- PROYECTOS -->
  <section class="panel right-panel">
    <div class="panel-head">
      <strong id="projectsTitle">Proyectos</strong>
      <span id="selectedClientInfo" class="small muted"></span>
    </div>

    <!-- KPIs -->
    <div class="grid-kpis">
      <div class="kpi">
        <div class="kpi-label">Monto Activo</div>
        <div id="kpi_active" class="kpi-value">$0</div>
      </div>
      <div class="kpi">
        <div class="kpi-label">Monto Probable</div>
        <div id="kpi_probable" class="kpi-value">$0</div>
      </div>
      <div class="kpi">
        <div class="kpi-label">Monto Ganado</div>
        <div id="kpi_won" class="kpi-value">$0</div>
      </div>
      <div class="kpi">
        <div class="kpi-label">Ticket Promedio</div>
        <div id="kpi_ticket" class="kpi-value">$0</div>
      </div>
      <div class="kpi">
        <div class="kpi-label">Conversión</div>
        <div id="kpi_conversion" class="kpi-value">0%</div>
      </div>
      <div class="kpi">
        <div class="kpi-label">Cierre</div>
        <div id="kpi_close" class="kpi-value">0%</div>
      </div>
    </div>

    <!-- FILTROS -->
    <div class="panel-controls">
      <select id="filterStatus" class="input-sm">
        <option value="">Todos los estatus</option>
        <option value="activo">Activo</option>
        <option value="proceso">Proceso</option>
        <option value="negociacion">Negociación</option>
        <option value="ganado">Ganado</option>
        <option value="cerrado">Cerrado</option>
        <option value="cancelado">Cancelado</option>
        <option value="perdido">Perdido</option>
      </select>

      <input id="projectSearch" class="input-sm" placeholder="Buscar proyecto"/>
    </div>

    <!-- PROYECTOS LISTA -->
    <div id="projectsContainer" class="list-cards"></div>

    <!-- GRÁFICAS -->
    <div class="charts-row">
      <div class="chart-card">
        <canvas id="chart_status" height="200"></canvas>
      </div>
      <div class="chart-card">
        <canvas id="chart_by_client" height="200"></canvas>
      </div>
    </div>

  </section>
</main>

<!-- MODAL CLIENTE -->
<div id="modalClient" class="modal hidden">
  <div class="modal-body">
    <h3>Nuevo Cliente</h3>
    <input id="clientName" class="input-sm" placeholder="Nombre"/>
    <select id="clientType" class="input-sm">
      <option value="1">Tipo 1 (1%)</option>
      <option value="2">Tipo 2 (1.5%)</option>
    </select>
    <div class="actions-row">
      <button id="saveClientBtn" class="btn btn-blue">Guardar</button>
      <button id="cancelClientBtn" class="btn btn-ghost">Cancelar</button>
    </div>
  </div>
</div>

<!-- MODAL PROYECTO -->
<div id="modalProject" class="modal hidden">
  <div class="modal-body">
    <h3>Nuevo Proyecto</h3>

    <select id="projectClientSelect" class="input-sm"></select>
    <input id="projectName" class="input-sm" placeholder="Nombre proyecto"/>
    <input id="projectAmount" class="input-sm" type="number" placeholder="Monto"/>
    <select id="projectStatus" class="input-sm">
      <option value="activo">Activo</option>
      <option value="proceso">Proceso</option>
      <option value="negociacion">Negociación</option>
      <option value="ganado">Ganado</option>
      <option value="cerrado">Cerrado</option>
    </select>
    <input id="projectProb" class="input-sm" type="number" placeholder="Probabilidad %"/>

    <input id="projectOpenedAt" class="input-sm" type="date"/>
    <input id="projectClosedAt" class="input-sm" type="date"/>

    <textarea id="projectComments" class="input-sm" placeholder="Comentarios"></textarea>
    <input id="projectPDF" type="file"/>

    <div class="actions-row">
      <button id="saveProjectBtn" class="btn btn-blue">Guardar</button>
      <button id="cancelProjectBtn" class="btn btn-ghost">Cancelar</button>
    </div>
  </div>
</div>

<script src="js-app.js"></script>
</body>
</html>
