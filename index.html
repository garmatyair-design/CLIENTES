<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>CRM Proyectos</title>
  <link rel="stylesheet" href="style.css"/>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>
<body>

<header class="topbar">
  <div class="brand">
    <h1>CRM Proyectos</h1>
    <div class="subtitle">Clientes · Proyectos · KPIs</div>
  </div>
  <input id="globalSearch" placeholder="Buscar cliente o proyecto"/>
  <a href="jdashboard.html" class="btn btn-outline">Ver Dashboard</a>
</header>

<main class="layout">
  <!-- CLIENTES -->
  <aside class="panel">
    <h2>Clientes</h2>
    <div class="row">
      <input id="clientSearch" placeholder="Buscar cliente"/>
      <select id="clientTypeFilter">
        <option value="">Todos</option>
        <option value="1">Tipo 1</option>
        <option value="2">Tipo 2</option>
      </select>
      <button id="btnAddClient" class="btn btn-yellow">+ Cliente</button>
    </div>
    <div id="clientList"></div>
  </aside>

  <!-- PROYECTOS -->
  <section class="panel">
    <h2 id="projectsTitle">Proyectos</h2>
    <div id="selectedClientInfo" class="small muted"></div>

    <section class="kpis">
      <div class="kpi"><div>Monto Activo</div><strong id="kpi_active">$0</strong></div>
      <div class="kpi"><div>Monto Probable</div><strong id="kpi_probable">$0</strong></div>
      <div class="kpi"><div>Monto Ganado</div><strong id="kpi_won">$0</strong></div>
      <div class="kpi"><div>Ticket Promedio</div><strong id="kpi_ticket">$0</strong></div>
      <div class="kpi"><div>Conversión</div><strong id="kpi_conversion">0%</strong></div>
      <div class="kpi"><div>Cierre</div><strong id="kpi_close">0%</strong></div>
    </section>

    <div class="row">
      <select id="filterStatus">
        <option value="">Todos los estatus</option>
        <option value="activo">Activo</option>
        <option value="proceso">Proceso</option>
        <option value="negociacion">Negociación</option>
        <option value="ganado">Ganado</option>
        <option value="cerrado">Cerrado</option>
        <option value="cancelado">Cancelado</option>
        <option value="perdido">Perdido</option>
      </select>
      <input id="projectSearch" placeholder="Buscar proyecto"/>
      <button id="btnAddProject" class="btn btn-blue">+ Proyecto</button>
    </div>

    <div id="projectsContainer"></div>

    <div class="row end">
      <button id="exportAllBtn" class="btn btn-yellow">Exportar todo a Excel</button>
      <button id="exportClientBtn" class="btn btn-outline">Exportar cliente</button>
    </div>
  </section>
</main>

<!-- FORM PROYECTO -->
<div id="projectFormCard" class="modal">
  <form id="projectForm" class="card">
    <h3>Proyecto</h3>
    <select id="projectClientSelect"></select>
    <input id="projectName" placeholder="Nombre del proyecto" required/>
    <input id="projectAmount" type="number" placeholder="Monto" required/>
    <select id="projectStatus">
      <option value="activo">Activo</option>
      <option value="proceso">Proceso</option>
      <option value="negociacion">Negociación</option>
      <option value="ganado">Ganado</option>
      <option value="cerrado">Cerrado</option>
      <option value="cancelado">Cancelado</option>
      <option value="perdido">Perdido</option>
    </select>
    <input id="projectProb" type="number" placeholder="Probabilidad %"/>
    <textarea id="projectComments" placeholder="Comentarios"></textarea>
    <input id="projectPDF" type="file" accept="application/pdf"/>
    <div class="row end">
      <button type="button" id="cancelProjectBtn" class="btn btn-outline">Cancelar</button>
      <button type="submit" class="btn btn-blue">Guardar</button>
    </div>
  </form>
</div>

<script src="js-app.js"></script>
</body>
</html>
