
   <!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>CRM Proyectos</title>

  <link rel="stylesheet" href="styles.css">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- XLSX -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
</head>
<body>

<header class="topbar">
  <h1>CRM Proyectos</h1>
</header>

<div class="main-content">

  <!-- CLIENTES -->
  <aside class="clients-panel">
    <h2>Clientes</h2>

    <input id="clientSearch" placeholder="Buscar cliente">
    <select id="clientTypeFilter">
      <option value="">Todos</option>
      <option value="1">Tipo 1</option>
      <option value="2">Tipo 2</option>
    </select>

    <button id="btnAddClient">+ Cliente</button>

    <div id="clientList"></div>
  </aside>

  <!-- PROYECTOS -->
  <section class="projects-panel">
    <h2 id="projectsTitle">Proyectos</h2>
    <div id="selectedClientInfo" class="muted"></div>

    <div class="filters">
      <select id="filterStatus">
        <option value="">Todos los estatus</option>
        <option value="activo">Activo</option>
        <option value="proceso">Proceso</option>
        <option value="negociacion">Negociación</option>
        <option value="ganado">Ganado</option>
        <option value="cerrado">Cerrado</option>
        <option value="perdido">Perdido</option>
        <option value="cancelado">Cancelado</option>
      </select>

      <input id="projectSearch" placeholder="Buscar proyecto">
      <button id="btnAddProject">+ Proyecto</button>
    </div>

    <!-- FORM PROYECTO -->
    <div id="projectFormCard" class="card" style="display:none">
      <form id="projectForm">

        <label>Cliente</label>
        <select id="projectClientSelect"></select>

        <label>Nombre del proyecto</label>
        <input id="projectName" required>

        <label>Monto</label>
        <input id="projectAmount" type="number" required>

        <label>Estatus</label>
        <select id="projectStatus">
          <option value="activo">Activo</option>
          <option value="proceso">Proceso</option>
          <option value="negociacion">Negociación</option>
          <option value="ganado">Ganado</option>
          <option value="cerrado">Cerrado</option>
          <option value="perdido">Perdido</option>
          <option value="cancelado">Cancelado</option>
        </select>

        <label>Probabilidad (%)</label>
        <input id="projectProb" type="number" value="0">

        <label>Fecha apertura</label>
        <input id="projectOpenDate" type="date" required>

        <label>Fecha cierre / ganada</label>
        <input id="projectCloseDate" type="date">

        <label>Comentarios</label>
        <textarea id="projectComments"></textarea>

        <label>PDF</label>
        <input id="projectPDF" type="file">

        <div class="actions">
          <button type="submit">Guardar</button>
          <button type="button" id="cancelProjectBtn">Cancelar</button>
        </div>

      </form>
    </div>

    <div id="projectsContainer"></div>

    <div class="exports">
      <button id="exportAllBtn">Exportar todo</button>
      <button id="exportClientBtn">Exportar cliente</button>
    </div>
  </section>

  <!-- KPIs -->
  <aside class="side-panel">
    <h3>KPIs del cliente</h3>

    <div class="kpi-card"><span>Monto Activo</span><strong id="kpi_active">$0</strong></div>
    <div class="kpi-card"><span>Monto Probable</span><strong id="kpi_probable">$0</strong></div>
    <div class="kpi-card"><span>Monto Ganado</span><strong id="kpi_won">$0</strong></div>
    <div class="kpi-card"><span>Ticket Promedio</span><strong id="kpi_ticket">$0</strong></div>
    <div class="kpi-card"><span>Conversión</span><strong id="kpi_conversion">0%</strong></div>
    <div class="kpi-card"><span>Cierre</span><strong id="kpi_close">0%</strong></div>

    <canvas id="chart_status"></canvas>
    <canvas id="chart_by_client"></canvas>
  </aside>

</div>

<script src="js-app.js"></script>
</body>
</html>
